# GP4U Platform — Environment Variables
# =========================================
# Copy this file to .env.local and fill in your values.
# Never commit .env.local to source control.

# ─── Database ─────────────────────────────────────────────────────────────────
# PostgreSQL connection string
# Local dev:  postgresql://postgres:postgres@localhost:5432/gp4u_dev
# Production: use a managed DB (Supabase, Neon, Railway, PlanetScale)
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/gp4u_dev"

# ─── Authentication ───────────────────────────────────────────────────────────
# Secret for HMAC-SHA256 token signing — must be at least 32 random bytes
# Generate: openssl rand -hex 32
GP4U_TOKEN_SECRET="REPLACE_ME_openssl_rand_hex_32"

# Dev-only: set this to your user UUID to bypass JWT in development
# Must be a real UUID that exists in the database (use prisma studio to find it)
# GP4U_DEV_SUBJECT_ID=""

# ─── Stripe ───────────────────────────────────────────────────────────────────
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY="sk_test_..."

# Get from: https://dashboard.stripe.com/webhooks
# Local dev: run `stripe listen --forward-to localhost:3000/api/billing/webhook`
#            and copy the signing secret it prints
STRIPE_WEBHOOK_SECRET="whsec_..."

# Stripe publishable key (used by the frontend to initialise Stripe.js)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# ─── Email (Resend) ───────────────────────────────────────────────────────────
# Get from: https://resend.com/api-keys
# Without this, emails are logged to console (dev mode — no real sending)
RESEND_API_KEY="re_..."

# The sender address verified in your Resend account
GP4U_EMAIL_FROM="GP4U <no-reply@gp4u.com>"

# ─── Redis (Upstash — rate limiting) ─────────────────────────────────────────
# Get from: https://upstash.com → Create Redis database → REST API
# Without these, rate limiting falls back to in-memory (dev only — not multi-instance safe)
UPSTASH_REDIS_REST_URL="https://your-db.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your_token"

# ─── Monitoring (Sentry) ──────────────────────────────────────────────────────
# Get from: https://sentry.io → Project → Settings → Client Keys (DSN)
# Without this, errors are logged to console only.
SENTRY_DSN="https://...@sentry.io/..."
NEXT_PUBLIC_SENTRY_DSN="https://...@sentry.io/..."
SENTRY_AUTH_TOKEN="sntrys_..."        # for source map upload during build
SENTRY_ORG="your-sentry-org"
SENTRY_PROJECT="gp4u-web"

# ─── Application ──────────────────────────────────────────────────────────────
# Public URL of the app (used in email links, CORS, etc.)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Node environment
NODE_ENV="development"
